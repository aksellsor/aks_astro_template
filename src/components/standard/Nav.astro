---
import { umbracoLink } from '@src/utils';

const { navMenuItems } = Astro.props;
const pathname = Astro.url.pathname;
---

<nav class='nav'>
  <h1 style='margin:0'>nav</h1>
  <div class='main-menu'>
    {
      navMenuItems?.map((item) => {
        let props = item?.content?.properties;
        const { href, title, target } = umbracoLink(props.link);
        return (
          <a
            title={title}
            href={href}
            target={target}
            class:list={['main-menu_item', { current: pathname === href }]}>
            {title}
          </a>
        );
      })
    }
  </div>
</nav>

<style>
  .nav {
    display: flex;
    align-items: center;
    background-color: rgba(150, 150, 150, 0.2);
    padding-left: 1rem;
    gap: 5rem;
  }
  .main-menu {
    display: flex;
  }
  .main-menu_item {
    padding: 1rem 1.5rem;
    color: inherit;
    text-decoration: none;
    position: relative;
  }
  .main-menu_item:hover {
    cursor: pointer;
    text-decoration: underline;
  }
  .main-menu_item:before {
    content: '';
    position: absolute;
    inset: 10% 5% 10% 5%;
    z-index: -1;
    border-radius: 0.25rem;
  }
  .main-menu_item.current:before {
    background-color: rgba(150, 150, 150, 0.3);
  }
</style>
